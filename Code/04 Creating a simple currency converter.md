
# Pulling data from public APIs (without registration) - GET request


```python
# loading the packages
# requests provides us with the capabilities of sending an HTTP request to a server
import requests
```

## Extracting data on currency exchange rates


```python
# We will use an API containing currency exchange rates as published by the European Central Bank
# Documentation at https://exchangeratesapi.io
```

### Sending a GET request


```python
# Define the base URL
# Base URL: the part of the URL common to all requests, not containing the parameters
base_url = "https://api.exchangeratesapi.io/latest"
```


```python
# We can make a GET request to this API endpoint with requests.get
response = requests.get(base_url)

# This method returns the response from the server
# We store this response in a variable for future processing
```

### Investigating the response


```python
# Checking if the request went through ok
response.ok
```




    True




```python
# Checking the status code of the response
response.status_code
```




    200




```python
# Inspecting the content body of the response (as a regular 'string')
response.text
```




    '{"rates":{"CAD":1.5613,"HKD":8.9041,"ISK":145.0,"PHP":58.013,"DKK":7.4695,"HUF":336.25,"CZK":25.504,"AUD":1.733,"RON":4.8175,"SEK":10.7203,"IDR":16488.05,"INR":84.96,"BRL":5.4418,"RUB":85.1553,"HRK":7.55,"JPY":117.12,"THB":36.081,"CHF":1.0594,"SGD":1.5841,"PLN":4.3132,"BGN":1.9558,"TRY":7.0002,"CNY":7.96,"NOK":10.89,"NZD":1.8021,"ZAR":18.2898,"USD":1.1456,"MXN":24.3268,"ILS":4.0275,"GBP":0.87383,"KRW":1374.71,"MYR":4.8304},"base":"EUR","date":"2020-03-09"}'




```python
# Inspecting the content of the response (in 'bytes' format)
response.content
```




    b'{"rates":{"CAD":1.5613,"HKD":8.9041,"ISK":145.0,"PHP":58.013,"DKK":7.4695,"HUF":336.25,"CZK":25.504,"AUD":1.733,"RON":4.8175,"SEK":10.7203,"IDR":16488.05,"INR":84.96,"BRL":5.4418,"RUB":85.1553,"HRK":7.55,"JPY":117.12,"THB":36.081,"CHF":1.0594,"SGD":1.5841,"PLN":4.3132,"BGN":1.9558,"TRY":7.0002,"CNY":7.96,"NOK":10.89,"NZD":1.8021,"ZAR":18.2898,"USD":1.1456,"MXN":24.3268,"ILS":4.0275,"GBP":0.87383,"KRW":1374.71,"MYR":4.8304},"base":"EUR","date":"2020-03-09"}'




```python
# The data is presented in JSON format
```

### Handling the JSON


```python
# Requests has in-build method to directly convert the response to JSON format
response.json()
```




    {'rates': {'CAD': 1.5613,
      'HKD': 8.9041,
      'ISK': 145.0,
      'PHP': 58.013,
      'DKK': 7.4695,
      'HUF': 336.25,
      'CZK': 25.504,
      'AUD': 1.733,
      'RON': 4.8175,
      'SEK': 10.7203,
      'IDR': 16488.05,
      'INR': 84.96,
      'BRL': 5.4418,
      'RUB': 85.1553,
      'HRK': 7.55,
      'JPY': 117.12,
      'THB': 36.081,
      'CHF': 1.0594,
      'SGD': 1.5841,
      'PLN': 4.3132,
      'BGN': 1.9558,
      'TRY': 7.0002,
      'CNY': 7.96,
      'NOK': 10.89,
      'NZD': 1.8021,
      'ZAR': 18.2898,
      'USD': 1.1456,
      'MXN': 24.3268,
      'ILS': 4.0275,
      'GBP': 0.87383,
      'KRW': 1374.71,
      'MYR': 4.8304},
     'base': 'EUR',
     'date': '2020-03-09'}




```python
# In Python, this JSON is stored as a dictionary
type(response.json())
```




    dict




```python
# A useful library for JSON manipulation and pretty print
import json

# It has two main methods:
# .loads(), which creates a Python dictionary from a JSON format string (just as response.json() does)
# .dumps(), which creates a JSON format string out of a Python dictionary 
```


```python
# .dumps() has options to make the string 'prettier', more readable
# We can choose the number of spaces to be used as indentation
json.dumps(response.json(), indent=4)
```




    '{\n    "rates": {\n        "CAD": 1.5613,\n        "HKD": 8.9041,\n        "ISK": 145.0,\n        "PHP": 58.013,\n        "DKK": 7.4695,\n        "HUF": 336.25,\n        "CZK": 25.504,\n        "AUD": 1.733,\n        "RON": 4.8175,\n        "SEK": 10.7203,\n        "IDR": 16488.05,\n        "INR": 84.96,\n        "BRL": 5.4418,\n        "RUB": 85.1553,\n        "HRK": 7.55,\n        "JPY": 117.12,\n        "THB": 36.081,\n        "CHF": 1.0594,\n        "SGD": 1.5841,\n        "PLN": 4.3132,\n        "BGN": 1.9558,\n        "TRY": 7.0002,\n        "CNY": 7.96,\n        "NOK": 10.89,\n        "NZD": 1.8021,\n        "ZAR": 18.2898,\n        "USD": 1.1456,\n        "MXN": 24.3268,\n        "ILS": 4.0275,\n        "GBP": 0.87383,\n        "KRW": 1374.71,\n        "MYR": 4.8304\n    },\n    "base": "EUR",\n    "date": "2020-03-09"\n}'




```python
# In order to visualize these changes, we need to print the string
print(json.dumps(response.json(), indent=4))
```

    {
        "rates": {
            "CAD": 1.5613,
            "HKD": 8.9041,
            "ISK": 145.0,
            "PHP": 58.013,
            "DKK": 7.4695,
            "HUF": 336.25,
            "CZK": 25.504,
            "AUD": 1.733,
            "RON": 4.8175,
            "SEK": 10.7203,
            "IDR": 16488.05,
            "INR": 84.96,
            "BRL": 5.4418,
            "RUB": 85.1553,
            "HRK": 7.55,
            "JPY": 117.12,
            "THB": 36.081,
            "CHF": 1.0594,
            "SGD": 1.5841,
            "PLN": 4.3132,
            "BGN": 1.9558,
            "TRY": 7.0002,
            "CNY": 7.96,
            "NOK": 10.89,
            "NZD": 1.8021,
            "ZAR": 18.2898,
            "USD": 1.1456,
            "MXN": 24.3268,
            "ILS": 4.0275,
            "GBP": 0.87383,
            "KRW": 1374.71,
            "MYR": 4.8304
        },
        "base": "EUR",
        "date": "2020-03-09"
    }
    


```python
# It contains 3 keys; the value for the 'rates' key is another dictionary
response.json().keys()
```




    dict_keys(['rates', 'base', 'date'])



### Incorporating parameters in the GET request


```python
# Request parameters are added to the URL after a question mark '?'
# In this case, we request for the exchange rates of the US Dollar (USD) and Pound Sterling (GBP) only
param_url = base_url + "?symbols=USD,GBP"
param_url
```




    'https://api.exchangeratesapi.io/latest?symbols=USD,GBP'




```python
# Making a request to the server with the new URL, containing the parameters
response = requests.get(param_url)
response.status_code
```




    200




```python
# Saving the response data
data = response.json()
data
```




    {'rates': {'USD': 1.1456, 'GBP': 0.87383}, 'base': 'EUR', 'date': '2020-03-09'}




```python
# 'data' is a dictionary
data['base']
```




    'EUR'




```python
data['date']
```




    '2020-03-09'




```python
data['rates']
```




    {'USD': 1.1456, 'GBP': 0.87383}




```python
# As per the documentation of this API, we can change the base with the parameter 'base'
param_url = base_url + "?symbols=GBP&base=USD"
```


```python
# Sending a request and saving the response JSON, all at once
data = requests.get(param_url).json()
data
```




    {'rates': {'GBP': 0.7627706006}, 'base': 'USD', 'date': '2020-03-09'}




```python
usd_to_gbp = data['rates']['GBP']
usd_to_gbp
```




    0.7627706006



### Obtaining historical exchange rates


```python
base_url = "https://api.exchangeratesapi.io"
```


```python
# We can also ask for the exhange rates at a particular day in the past with '/DATE', where DATE is in the format YYYY-MM-DD
historical_url = base_url + "/2016-01-26"
historical_url
```




    'https://api.exchangeratesapi.io/2016-01-26'




```python
# Making the GET request
response = requests.get(historical_url)
response.status_code
```




    200




```python
# Pretty printing the data
data = response.json()
print(json.dumps(data, indent=4))
```

    {
        "rates": {
            "CAD": 1.5411,
            "HKD": 8.4498,
            "SGD": 1.5498,
            "PHP": 52.051,
            "DKK": 7.4622,
            "HUF": 312.73,
            "CZK": 27.021,
            "AUD": 1.555,
            "RON": 4.5348,
            "SEK": 9.2644,
            "IDR": 15004.76,
            "INR": 73.5797,
            "BRL": 4.4465,
            "RUB": 86.7725,
            "HRK": 7.6658,
            "JPY": 128.22,
            "THB": 38.865,
            "CHF": 1.1008,
            "PLN": 4.4942,
            "BGN": 1.9558,
            "TRY": 3.2699,
            "CNY": 7.1314,
            "NOK": 9.4858,
            "NZD": 1.6777,
            "ZAR": 17.8881,
            "USD": 1.0837,
            "MXN": 20.1259,
            "ILS": 4.3084,
            "GBP": 0.76095,
            "KRW": 1303.82,
            "MYR": 4.6335
        },
        "base": "EUR",
        "date": "2016-01-26"
    }
    

### Extracting data for a time period


```python
# The last feautre of this API is: giving the historical exchange rates for every day over some time period
```


```python
# The URL for this request is formed with '/history' and the parameters 'start_at' and 'end_at'
time_period = base_url + "/history" + "?start_at=2017-04-26&end_at=2018-04-26" + "&symbols=GBP"
time_period
```




    'https://api.exchangeratesapi.io/history?start_at=2017-04-26&end_at=2018-04-26&symbols=GBP'




```python
# Extracting the response JSON object
data = requests.get(time_period).json()
```


```python
# Pretty printing the JSON
# Notice that the dates are in random order
print(json.dumps(data, indent=4))
```

    {
        "rates": {
            "2017-08-02": {
                "GBP": 0.89425
            },
            "2017-08-07": {
                "GBP": 0.90435
            },
            "2017-12-05": {
                "GBP": 0.88183
            },
            "2017-08-03": {
                "GBP": 0.90318
            },
            "2017-10-17": {
                "GBP": 0.89148
            },
            "2017-05-12": {
                "GBP": 0.84588
            },
            "2017-10-23": {
                "GBP": 0.8909
            },
            "2017-10-04": {
                "GBP": 0.88768
            },
            "2017-08-16": {
                "GBP": 0.90993
            },
            "2017-06-12": {
                "GBP": 0.88545
            },
            "2018-04-10": {
                "GBP": 0.87183
            },
            "2017-09-19": {
                "GBP": 0.88622
            },
            "2017-10-27": {
                "GBP": 0.88633
            },
            "2018-03-26": {
                "GBP": 0.87248
            },
            "2017-09-06": {
                "GBP": 0.91428
            },
            "2018-04-06": {
                "GBP": 0.87295
            },
            "2018-02-08": {
                "GBP": 0.87513
            },
            "2018-03-23": {
                "GBP": 0.87285
            },
            "2017-07-07": {
                "GBP": 0.88488
            },
            "2017-09-05": {
                "GBP": 0.9174
            },
            "2017-11-15": {
                "GBP": 0.8991
            },
            "2017-07-18": {
                "GBP": 0.8878
            },
            "2018-04-16": {
                "GBP": 0.86465
            },
            "2017-10-30": {
                "GBP": 0.8798
            },
            "2017-07-25": {
                "GBP": 0.89395
            },
            "2017-09-28": {
                "GBP": 0.87635
            },
            "2017-06-15": {
                "GBP": 0.8764
            },
            "2017-11-07": {
                "GBP": 0.88038
            },
            "2017-08-09": {
                "GBP": 0.90338
            },
            "2017-11-06": {
                "GBP": 0.8839
            },
            "2017-07-20": {
                "GBP": 0.88718
            },
            "2018-02-09": {
                "GBP": 0.8874
            },
            "2017-10-26": {
                "GBP": 0.8901
            },
            "2018-01-09": {
                "GBP": 0.8827
            },
            "2018-01-24": {
                "GBP": 0.87183
            },
            "2018-02-13": {
                "GBP": 0.88935
            },
            "2017-07-17": {
                "GBP": 0.87755
            },
            "2017-11-16": {
                "GBP": 0.89183
            },
            "2018-01-18": {
                "GBP": 0.88208
            },
            "2017-08-22": {
                "GBP": 0.91713
            },
            "2017-10-12": {
                "GBP": 0.90235
            },
            "2017-07-19": {
                "GBP": 0.88485
            },
            "2017-06-01": {
                "GBP": 0.8723
            },
            "2017-09-12": {
                "GBP": 0.89878
            },
            "2017-10-18": {
                "GBP": 0.89283
            },
            "2017-05-05": {
                "GBP": 0.8471
            },
            "2017-05-17": {
                "GBP": 0.85745
            },
            "2017-10-16": {
                "GBP": 0.88753
            },
            "2017-09-26": {
                "GBP": 0.87775
            },
            "2018-03-20": {
                "GBP": 0.87715
            },
            "2017-12-18": {
                "GBP": 0.88208
            },
            "2017-10-03": {
                "GBP": 0.88793
            },
            "2018-02-22": {
                "GBP": 0.88343
            },
            "2018-02-26": {
                "GBP": 0.8782
            },
            "2017-06-07": {
                "GBP": 0.86908
            },
            "2017-08-25": {
                "GBP": 0.92083
            },
            "2017-12-08": {
                "GBP": 0.87525
            },
            "2017-12-01": {
                "GBP": 0.88115
            },
            "2017-10-25": {
                "GBP": 0.88883
            },
            "2017-11-24": {
                "GBP": 0.8912
            },
            "2017-11-09": {
                "GBP": 0.88633
            },
            "2018-04-19": {
                "GBP": 0.86975
            },
            "2017-08-29": {
                "GBP": 0.92965
            },
            "2018-02-01": {
                "GBP": 0.8752
            },
            "2018-03-21": {
                "GBP": 0.87403
            },
            "2018-01-16": {
                "GBP": 0.8886
            },
            "2017-08-21": {
                "GBP": 0.91318
            },
            "2018-01-26": {
                "GBP": 0.87335
            },
            "2017-08-11": {
                "GBP": 0.90645
            },
            "2018-01-04": {
                "GBP": 0.89103
            },
            "2018-01-22": {
                "GBP": 0.88085
            },
            "2017-05-19": {
                "GBP": 0.85908
            },
            "2017-04-26": {
                "GBP": 0.84903
            },
            "2017-11-14": {
                "GBP": 0.89585
            },
            "2018-01-03": {
                "GBP": 0.8864
            },
            "2018-04-26": {
                "GBP": 0.871
            },
            "2018-03-02": {
                "GBP": 0.8932
            },
            "2017-06-22": {
                "GBP": 0.88168
            },
            "2017-08-24": {
                "GBP": 0.92
            },
            "2017-11-29": {
                "GBP": 0.88293
            },
            "2017-05-10": {
                "GBP": 0.83985
            },
            "2018-02-12": {
                "GBP": 0.886
            },
            "2018-03-08": {
                "GBP": 0.89465
            },
            "2017-07-21": {
                "GBP": 0.8961
            },
            "2017-12-29": {
                "GBP": 0.88723
            },
            "2017-09-13": {
                "GBP": 0.90243
            },
            "2017-09-01": {
                "GBP": 0.92075
            },
            "2017-08-17": {
                "GBP": 0.90895
            },
            "2017-06-27": {
                "GBP": 0.8837
            },
            "2018-02-14": {
                "GBP": 0.8904
            },
            "2017-05-08": {
                "GBP": 0.84465
            },
            "2017-12-22": {
                "GBP": 0.88568
            },
            "2017-09-22": {
                "GBP": 0.88155
            },
            "2017-07-24": {
                "GBP": 0.8935
            },
            "2017-06-02": {
                "GBP": 0.87268
            },
            "2017-05-26": {
                "GBP": 0.8719
            },
            "2017-05-22": {
                "GBP": 0.86353
            },
            "2017-06-26": {
                "GBP": 0.8783
            },
            "2017-05-15": {
                "GBP": 0.84928
            },
            "2017-05-18": {
                "GBP": 0.85363
            },
            "2017-08-23": {
                "GBP": 0.92133
            },
            "2017-08-18": {
                "GBP": 0.91188
            },
            "2018-04-25": {
                "GBP": 0.8738
            },
            "2017-05-31": {
                "GBP": 0.87365
            },
            "2017-07-28": {
                "GBP": 0.89568
            },
            "2017-12-06": {
                "GBP": 0.88335
            },
            "2017-05-09": {
                "GBP": 0.843
            },
            "2017-12-27": {
                "GBP": 0.88593
            },
            "2017-06-14": {
                "GBP": 0.8796
            },
            "2017-07-05": {
                "GBP": 0.87735
            },
            "2018-02-02": {
                "GBP": 0.8785
            },
            "2017-07-10": {
                "GBP": 0.88443
            },
            "2017-09-07": {
                "GBP": 0.91403
            },
            "2018-04-12": {
                "GBP": 0.86745
            },
            "2018-03-05": {
                "GBP": 0.8907
            },
            "2017-12-13": {
                "GBP": 0.87905
            },
            "2017-07-06": {
                "GBP": 0.88013
            },
            "2017-12-04": {
                "GBP": 0.87725
            },
            "2017-11-02": {
                "GBP": 0.8869
            },
            "2018-03-07": {
                "GBP": 0.89513
            },
            "2017-07-31": {
                "GBP": 0.8942
            },
            "2017-09-14": {
                "GBP": 0.89123
            },
            "2017-07-26": {
                "GBP": 0.89275
            },
            "2017-08-08": {
                "GBP": 0.90678
            },
            "2017-11-03": {
                "GBP": 0.88923
            },
            "2017-08-14": {
                "GBP": 0.90935
            },
            "2017-09-27": {
                "GBP": 0.87565
            },
            "2018-02-16": {
                "GBP": 0.88803
            },
            "2018-04-18": {
                "GBP": 0.87105
            },
            "2018-01-10": {
                "GBP": 0.8867
            },
            "2018-01-05": {
                "GBP": 0.88883
            },
            "2018-01-31": {
                "GBP": 0.8791
            },
            "2017-06-16": {
                "GBP": 0.87453
            },
            "2017-06-13": {
                "GBP": 0.88075
            },
            "2018-01-02": {
                "GBP": 0.88953
            },
            "2017-08-01": {
                "GBP": 0.8944
            },
            "2017-09-11": {
                "GBP": 0.90775
            },
            "2017-06-06": {
                "GBP": 0.8723
            },
            "2017-11-22": {
                "GBP": 0.8881
            },
            "2017-09-20": {
                "GBP": 0.8868
            },
            "2017-10-06": {
                "GBP": 0.89535
            },
            "2017-12-11": {
                "GBP": 0.8825
            },
            "2018-02-28": {
                "GBP": 0.88415
            },
            "2018-04-13": {
                "GBP": 0.864
            },
            "2018-04-04": {
                "GBP": 0.87573
            },
            "2018-03-01": {
                "GBP": 0.8852
            },
            "2017-10-13": {
                "GBP": 0.8898
            },
            "2017-09-08": {
                "GBP": 0.91268
            },
            "2017-11-20": {
                "GBP": 0.8894
            },
            "2018-02-07": {
                "GBP": 0.88675
            },
            "2018-01-17": {
                "GBP": 0.88568
            },
            "2017-10-24": {
                "GBP": 0.89303
            },
            "2017-06-05": {
                "GBP": 0.8713
            },
            "2018-03-14": {
                "GBP": 0.8863
            },
            "2017-06-28": {
                "GBP": 0.88525
            },
            "2018-03-06": {
                "GBP": 0.89165
            },
            "2017-05-29": {
                "GBP": 0.87093
            },
            "2017-06-20": {
                "GBP": 0.88143
            },
            "2018-03-12": {
                "GBP": 0.8859
            },
            "2018-01-08": {
                "GBP": 0.88413
            },
            "2017-12-12": {
                "GBP": 0.88068
            },
            "2017-10-05": {
                "GBP": 0.89153
            },
            "2017-10-10": {
                "GBP": 0.8941
            },
            "2017-12-07": {
                "GBP": 0.88068
            },
            "2017-07-12": {
                "GBP": 0.88925
            },
            "2017-06-29": {
                "GBP": 0.8799
            },
            "2017-08-30": {
                "GBP": 0.92246
            },
            "2018-01-12": {
                "GBP": 0.88983
            },
            "2017-11-21": {
                "GBP": 0.88498
            },
            "2017-11-13": {
                "GBP": 0.89018
            },
            "2018-03-15": {
                "GBP": 0.8848
            },
            "2017-09-15": {
                "GBP": 0.88043
            },
            "2017-07-14": {
                "GBP": 0.87983
            },
            "2017-12-15": {
                "GBP": 0.88253
            },
            "2017-05-23": {
                "GBP": 0.86463
            },
            "2017-09-29": {
                "GBP": 0.88178
            },
            "2018-02-23": {
                "GBP": 0.8794
            },
            "2017-12-28": {
                "GBP": 0.88768
            },
            "2017-12-19": {
                "GBP": 0.885
            },
            "2018-03-16": {
                "GBP": 0.88253
            },
            "2018-03-09": {
                "GBP": 0.88893
            },
            "2018-03-29": {
                "GBP": 0.8749
            },
            "2018-02-27": {
                "GBP": 0.884
            },
            "2017-06-30": {
                "GBP": 0.87933
            },
            "2018-03-13": {
                "GBP": 0.8865
            },
            "2018-04-24": {
                "GBP": 0.87468
            },
            "2017-09-18": {
                "GBP": 0.88253
            },
            "2017-11-23": {
                "GBP": 0.89005
            },
            "2018-03-27": {
                "GBP": 0.8794
            },
            "2018-04-09": {
                "GBP": 0.87088
            },
            "2018-04-05": {
                "GBP": 0.87395
            },
            "2017-11-30": {
                "GBP": 0.87985
            },
            "2017-11-27": {
                "GBP": 0.89375
            },
            "2018-02-20": {
                "GBP": 0.88168
            },
            "2017-11-08": {
                "GBP": 0.88405
            },
            "2018-01-23": {
                "GBP": 0.8783
            },
            "2017-05-16": {
                "GBP": 0.85868
            },
            "2018-04-03": {
                "GBP": 0.87523
            },
            "2018-04-17": {
                "GBP": 0.8628
            },
            "2017-05-25": {
                "GBP": 0.86528
            },
            "2017-10-11": {
                "GBP": 0.8971
            },
            "2017-09-04": {
                "GBP": 0.91855
            },
            "2017-07-13": {
                "GBP": 0.88215
            },
            "2017-06-08": {
                "GBP": 0.86755
            },
            "2017-04-28": {
                "GBP": 0.84473
            },
            "2018-01-11": {
                "GBP": 0.89075
            },
            "2017-07-03": {
                "GBP": 0.87705
            },
            "2018-04-11": {
                "GBP": 0.8736
            },
            "2017-07-04": {
                "GBP": 0.87805
            },
            "2017-05-30": {
                "GBP": 0.86793
            },
            "2018-02-06": {
                "GBP": 0.88885
            },
            "2017-12-20": {
                "GBP": 0.8832
            },
            "2017-05-03": {
                "GBP": 0.8444
            },
            "2017-08-28": {
                "GBP": 0.92328
            },
            "2018-04-23": {
                "GBP": 0.8764
            },
            "2017-08-15": {
                "GBP": 0.91145
            },
            "2018-01-19": {
                "GBP": 0.88365
            },
            "2017-10-20": {
                "GBP": 0.89623
            },
            "2017-11-01": {
                "GBP": 0.87385
            },
            "2017-04-27": {
                "GBP": 0.8442
            },
            "2017-05-11": {
                "GBP": 0.84485
            },
            "2017-10-19": {
                "GBP": 0.89815
            },
            "2017-07-27": {
                "GBP": 0.88978
            },
            "2017-05-02": {
                "GBP": 0.8452
            },
            "2018-03-19": {
                "GBP": 0.87593
            },
            "2018-02-05": {
                "GBP": 0.88568
            },
            "2017-10-02": {
                "GBP": 0.88418
            },
            "2017-11-28": {
                "GBP": 0.89538
            },
            "2017-05-24": {
                "GBP": 0.8634
            },
            "2018-02-21": {
                "GBP": 0.88463
            },
            "2017-10-09": {
                "GBP": 0.89195
            },
            "2017-06-19": {
                "GBP": 0.87518
            },
            "2017-07-11": {
                "GBP": 0.88318
            },
            "2017-08-31": {
                "GBP": 0.91973
            },
            "2017-06-23": {
                "GBP": 0.87805
            },
            "2017-08-10": {
                "GBP": 0.90303
            },
            "2017-10-31": {
                "GBP": 0.87853
            },
            "2018-02-15": {
                "GBP": 0.8866
            },
            "2018-03-22": {
                "GBP": 0.872
            },
            "2018-02-19": {
                "GBP": 0.8859
            },
            "2017-09-21": {
                "GBP": 0.8824
            },
            "2017-12-21": {
                "GBP": 0.88763
            },
            "2017-11-17": {
                "GBP": 0.89385
            },
            "2017-06-21": {
                "GBP": 0.8781
            },
            "2017-12-14": {
                "GBP": 0.88163
            },
            "2018-01-30": {
                "GBP": 0.8793
            },
            "2017-08-04": {
                "GBP": 0.9028
            },
            "2018-03-28": {
                "GBP": 0.87605
            },
            "2018-01-29": {
                "GBP": 0.8794
            },
            "2017-06-09": {
                "GBP": 0.87638
            },
            "2017-05-04": {
                "GBP": 0.84765
            },
            "2018-01-25": {
                "GBP": 0.87038
            },
            "2017-09-25": {
                "GBP": 0.87938
            },
            "2017-11-10": {
                "GBP": 0.8837
            },
            "2018-04-20": {
                "GBP": 0.87608
            },
            "2018-01-15": {
                "GBP": 0.89043
            }
        },
        "start_at": "2017-04-26",
        "base": "EUR",
        "end_at": "2018-04-26"
    }
    


```python
# We can use the 'sort_keys' parameter of the json.dumps() method to order these dates chronologically
print(json.dumps(data, indent=4, sort_keys=True))
```

    {
        "base": "EUR",
        "end_at": "2018-04-26",
        "rates": {
            "2017-04-26": {
                "GBP": 0.84903
            },
            "2017-04-27": {
                "GBP": 0.8442
            },
            "2017-04-28": {
                "GBP": 0.84473
            },
            "2017-05-02": {
                "GBP": 0.8452
            },
            "2017-05-03": {
                "GBP": 0.8444
            },
            "2017-05-04": {
                "GBP": 0.84765
            },
            "2017-05-05": {
                "GBP": 0.8471
            },
            "2017-05-08": {
                "GBP": 0.84465
            },
            "2017-05-09": {
                "GBP": 0.843
            },
            "2017-05-10": {
                "GBP": 0.83985
            },
            "2017-05-11": {
                "GBP": 0.84485
            },
            "2017-05-12": {
                "GBP": 0.84588
            },
            "2017-05-15": {
                "GBP": 0.84928
            },
            "2017-05-16": {
                "GBP": 0.85868
            },
            "2017-05-17": {
                "GBP": 0.85745
            },
            "2017-05-18": {
                "GBP": 0.85363
            },
            "2017-05-19": {
                "GBP": 0.85908
            },
            "2017-05-22": {
                "GBP": 0.86353
            },
            "2017-05-23": {
                "GBP": 0.86463
            },
            "2017-05-24": {
                "GBP": 0.8634
            },
            "2017-05-25": {
                "GBP": 0.86528
            },
            "2017-05-26": {
                "GBP": 0.8719
            },
            "2017-05-29": {
                "GBP": 0.87093
            },
            "2017-05-30": {
                "GBP": 0.86793
            },
            "2017-05-31": {
                "GBP": 0.87365
            },
            "2017-06-01": {
                "GBP": 0.8723
            },
            "2017-06-02": {
                "GBP": 0.87268
            },
            "2017-06-05": {
                "GBP": 0.8713
            },
            "2017-06-06": {
                "GBP": 0.8723
            },
            "2017-06-07": {
                "GBP": 0.86908
            },
            "2017-06-08": {
                "GBP": 0.86755
            },
            "2017-06-09": {
                "GBP": 0.87638
            },
            "2017-06-12": {
                "GBP": 0.88545
            },
            "2017-06-13": {
                "GBP": 0.88075
            },
            "2017-06-14": {
                "GBP": 0.8796
            },
            "2017-06-15": {
                "GBP": 0.8764
            },
            "2017-06-16": {
                "GBP": 0.87453
            },
            "2017-06-19": {
                "GBP": 0.87518
            },
            "2017-06-20": {
                "GBP": 0.88143
            },
            "2017-06-21": {
                "GBP": 0.8781
            },
            "2017-06-22": {
                "GBP": 0.88168
            },
            "2017-06-23": {
                "GBP": 0.87805
            },
            "2017-06-26": {
                "GBP": 0.8783
            },
            "2017-06-27": {
                "GBP": 0.8837
            },
            "2017-06-28": {
                "GBP": 0.88525
            },
            "2017-06-29": {
                "GBP": 0.8799
            },
            "2017-06-30": {
                "GBP": 0.87933
            },
            "2017-07-03": {
                "GBP": 0.87705
            },
            "2017-07-04": {
                "GBP": 0.87805
            },
            "2017-07-05": {
                "GBP": 0.87735
            },
            "2017-07-06": {
                "GBP": 0.88013
            },
            "2017-07-07": {
                "GBP": 0.88488
            },
            "2017-07-10": {
                "GBP": 0.88443
            },
            "2017-07-11": {
                "GBP": 0.88318
            },
            "2017-07-12": {
                "GBP": 0.88925
            },
            "2017-07-13": {
                "GBP": 0.88215
            },
            "2017-07-14": {
                "GBP": 0.87983
            },
            "2017-07-17": {
                "GBP": 0.87755
            },
            "2017-07-18": {
                "GBP": 0.8878
            },
            "2017-07-19": {
                "GBP": 0.88485
            },
            "2017-07-20": {
                "GBP": 0.88718
            },
            "2017-07-21": {
                "GBP": 0.8961
            },
            "2017-07-24": {
                "GBP": 0.8935
            },
            "2017-07-25": {
                "GBP": 0.89395
            },
            "2017-07-26": {
                "GBP": 0.89275
            },
            "2017-07-27": {
                "GBP": 0.88978
            },
            "2017-07-28": {
                "GBP": 0.89568
            },
            "2017-07-31": {
                "GBP": 0.8942
            },
            "2017-08-01": {
                "GBP": 0.8944
            },
            "2017-08-02": {
                "GBP": 0.89425
            },
            "2017-08-03": {
                "GBP": 0.90318
            },
            "2017-08-04": {
                "GBP": 0.9028
            },
            "2017-08-07": {
                "GBP": 0.90435
            },
            "2017-08-08": {
                "GBP": 0.90678
            },
            "2017-08-09": {
                "GBP": 0.90338
            },
            "2017-08-10": {
                "GBP": 0.90303
            },
            "2017-08-11": {
                "GBP": 0.90645
            },
            "2017-08-14": {
                "GBP": 0.90935
            },
            "2017-08-15": {
                "GBP": 0.91145
            },
            "2017-08-16": {
                "GBP": 0.90993
            },
            "2017-08-17": {
                "GBP": 0.90895
            },
            "2017-08-18": {
                "GBP": 0.91188
            },
            "2017-08-21": {
                "GBP": 0.91318
            },
            "2017-08-22": {
                "GBP": 0.91713
            },
            "2017-08-23": {
                "GBP": 0.92133
            },
            "2017-08-24": {
                "GBP": 0.92
            },
            "2017-08-25": {
                "GBP": 0.92083
            },
            "2017-08-28": {
                "GBP": 0.92328
            },
            "2017-08-29": {
                "GBP": 0.92965
            },
            "2017-08-30": {
                "GBP": 0.92246
            },
            "2017-08-31": {
                "GBP": 0.91973
            },
            "2017-09-01": {
                "GBP": 0.92075
            },
            "2017-09-04": {
                "GBP": 0.91855
            },
            "2017-09-05": {
                "GBP": 0.9174
            },
            "2017-09-06": {
                "GBP": 0.91428
            },
            "2017-09-07": {
                "GBP": 0.91403
            },
            "2017-09-08": {
                "GBP": 0.91268
            },
            "2017-09-11": {
                "GBP": 0.90775
            },
            "2017-09-12": {
                "GBP": 0.89878
            },
            "2017-09-13": {
                "GBP": 0.90243
            },
            "2017-09-14": {
                "GBP": 0.89123
            },
            "2017-09-15": {
                "GBP": 0.88043
            },
            "2017-09-18": {
                "GBP": 0.88253
            },
            "2017-09-19": {
                "GBP": 0.88622
            },
            "2017-09-20": {
                "GBP": 0.8868
            },
            "2017-09-21": {
                "GBP": 0.8824
            },
            "2017-09-22": {
                "GBP": 0.88155
            },
            "2017-09-25": {
                "GBP": 0.87938
            },
            "2017-09-26": {
                "GBP": 0.87775
            },
            "2017-09-27": {
                "GBP": 0.87565
            },
            "2017-09-28": {
                "GBP": 0.87635
            },
            "2017-09-29": {
                "GBP": 0.88178
            },
            "2017-10-02": {
                "GBP": 0.88418
            },
            "2017-10-03": {
                "GBP": 0.88793
            },
            "2017-10-04": {
                "GBP": 0.88768
            },
            "2017-10-05": {
                "GBP": 0.89153
            },
            "2017-10-06": {
                "GBP": 0.89535
            },
            "2017-10-09": {
                "GBP": 0.89195
            },
            "2017-10-10": {
                "GBP": 0.8941
            },
            "2017-10-11": {
                "GBP": 0.8971
            },
            "2017-10-12": {
                "GBP": 0.90235
            },
            "2017-10-13": {
                "GBP": 0.8898
            },
            "2017-10-16": {
                "GBP": 0.88753
            },
            "2017-10-17": {
                "GBP": 0.89148
            },
            "2017-10-18": {
                "GBP": 0.89283
            },
            "2017-10-19": {
                "GBP": 0.89815
            },
            "2017-10-20": {
                "GBP": 0.89623
            },
            "2017-10-23": {
                "GBP": 0.8909
            },
            "2017-10-24": {
                "GBP": 0.89303
            },
            "2017-10-25": {
                "GBP": 0.88883
            },
            "2017-10-26": {
                "GBP": 0.8901
            },
            "2017-10-27": {
                "GBP": 0.88633
            },
            "2017-10-30": {
                "GBP": 0.8798
            },
            "2017-10-31": {
                "GBP": 0.87853
            },
            "2017-11-01": {
                "GBP": 0.87385
            },
            "2017-11-02": {
                "GBP": 0.8869
            },
            "2017-11-03": {
                "GBP": 0.88923
            },
            "2017-11-06": {
                "GBP": 0.8839
            },
            "2017-11-07": {
                "GBP": 0.88038
            },
            "2017-11-08": {
                "GBP": 0.88405
            },
            "2017-11-09": {
                "GBP": 0.88633
            },
            "2017-11-10": {
                "GBP": 0.8837
            },
            "2017-11-13": {
                "GBP": 0.89018
            },
            "2017-11-14": {
                "GBP": 0.89585
            },
            "2017-11-15": {
                "GBP": 0.8991
            },
            "2017-11-16": {
                "GBP": 0.89183
            },
            "2017-11-17": {
                "GBP": 0.89385
            },
            "2017-11-20": {
                "GBP": 0.8894
            },
            "2017-11-21": {
                "GBP": 0.88498
            },
            "2017-11-22": {
                "GBP": 0.8881
            },
            "2017-11-23": {
                "GBP": 0.89005
            },
            "2017-11-24": {
                "GBP": 0.8912
            },
            "2017-11-27": {
                "GBP": 0.89375
            },
            "2017-11-28": {
                "GBP": 0.89538
            },
            "2017-11-29": {
                "GBP": 0.88293
            },
            "2017-11-30": {
                "GBP": 0.87985
            },
            "2017-12-01": {
                "GBP": 0.88115
            },
            "2017-12-04": {
                "GBP": 0.87725
            },
            "2017-12-05": {
                "GBP": 0.88183
            },
            "2017-12-06": {
                "GBP": 0.88335
            },
            "2017-12-07": {
                "GBP": 0.88068
            },
            "2017-12-08": {
                "GBP": 0.87525
            },
            "2017-12-11": {
                "GBP": 0.8825
            },
            "2017-12-12": {
                "GBP": 0.88068
            },
            "2017-12-13": {
                "GBP": 0.87905
            },
            "2017-12-14": {
                "GBP": 0.88163
            },
            "2017-12-15": {
                "GBP": 0.88253
            },
            "2017-12-18": {
                "GBP": 0.88208
            },
            "2017-12-19": {
                "GBP": 0.885
            },
            "2017-12-20": {
                "GBP": 0.8832
            },
            "2017-12-21": {
                "GBP": 0.88763
            },
            "2017-12-22": {
                "GBP": 0.88568
            },
            "2017-12-27": {
                "GBP": 0.88593
            },
            "2017-12-28": {
                "GBP": 0.88768
            },
            "2017-12-29": {
                "GBP": 0.88723
            },
            "2018-01-02": {
                "GBP": 0.88953
            },
            "2018-01-03": {
                "GBP": 0.8864
            },
            "2018-01-04": {
                "GBP": 0.89103
            },
            "2018-01-05": {
                "GBP": 0.88883
            },
            "2018-01-08": {
                "GBP": 0.88413
            },
            "2018-01-09": {
                "GBP": 0.8827
            },
            "2018-01-10": {
                "GBP": 0.8867
            },
            "2018-01-11": {
                "GBP": 0.89075
            },
            "2018-01-12": {
                "GBP": 0.88983
            },
            "2018-01-15": {
                "GBP": 0.89043
            },
            "2018-01-16": {
                "GBP": 0.8886
            },
            "2018-01-17": {
                "GBP": 0.88568
            },
            "2018-01-18": {
                "GBP": 0.88208
            },
            "2018-01-19": {
                "GBP": 0.88365
            },
            "2018-01-22": {
                "GBP": 0.88085
            },
            "2018-01-23": {
                "GBP": 0.8783
            },
            "2018-01-24": {
                "GBP": 0.87183
            },
            "2018-01-25": {
                "GBP": 0.87038
            },
            "2018-01-26": {
                "GBP": 0.87335
            },
            "2018-01-29": {
                "GBP": 0.8794
            },
            "2018-01-30": {
                "GBP": 0.8793
            },
            "2018-01-31": {
                "GBP": 0.8791
            },
            "2018-02-01": {
                "GBP": 0.8752
            },
            "2018-02-02": {
                "GBP": 0.8785
            },
            "2018-02-05": {
                "GBP": 0.88568
            },
            "2018-02-06": {
                "GBP": 0.88885
            },
            "2018-02-07": {
                "GBP": 0.88675
            },
            "2018-02-08": {
                "GBP": 0.87513
            },
            "2018-02-09": {
                "GBP": 0.8874
            },
            "2018-02-12": {
                "GBP": 0.886
            },
            "2018-02-13": {
                "GBP": 0.88935
            },
            "2018-02-14": {
                "GBP": 0.8904
            },
            "2018-02-15": {
                "GBP": 0.8866
            },
            "2018-02-16": {
                "GBP": 0.88803
            },
            "2018-02-19": {
                "GBP": 0.8859
            },
            "2018-02-20": {
                "GBP": 0.88168
            },
            "2018-02-21": {
                "GBP": 0.88463
            },
            "2018-02-22": {
                "GBP": 0.88343
            },
            "2018-02-23": {
                "GBP": 0.8794
            },
            "2018-02-26": {
                "GBP": 0.8782
            },
            "2018-02-27": {
                "GBP": 0.884
            },
            "2018-02-28": {
                "GBP": 0.88415
            },
            "2018-03-01": {
                "GBP": 0.8852
            },
            "2018-03-02": {
                "GBP": 0.8932
            },
            "2018-03-05": {
                "GBP": 0.8907
            },
            "2018-03-06": {
                "GBP": 0.89165
            },
            "2018-03-07": {
                "GBP": 0.89513
            },
            "2018-03-08": {
                "GBP": 0.89465
            },
            "2018-03-09": {
                "GBP": 0.88893
            },
            "2018-03-12": {
                "GBP": 0.8859
            },
            "2018-03-13": {
                "GBP": 0.8865
            },
            "2018-03-14": {
                "GBP": 0.8863
            },
            "2018-03-15": {
                "GBP": 0.8848
            },
            "2018-03-16": {
                "GBP": 0.88253
            },
            "2018-03-19": {
                "GBP": 0.87593
            },
            "2018-03-20": {
                "GBP": 0.87715
            },
            "2018-03-21": {
                "GBP": 0.87403
            },
            "2018-03-22": {
                "GBP": 0.872
            },
            "2018-03-23": {
                "GBP": 0.87285
            },
            "2018-03-26": {
                "GBP": 0.87248
            },
            "2018-03-27": {
                "GBP": 0.8794
            },
            "2018-03-28": {
                "GBP": 0.87605
            },
            "2018-03-29": {
                "GBP": 0.8749
            },
            "2018-04-03": {
                "GBP": 0.87523
            },
            "2018-04-04": {
                "GBP": 0.87573
            },
            "2018-04-05": {
                "GBP": 0.87395
            },
            "2018-04-06": {
                "GBP": 0.87295
            },
            "2018-04-09": {
                "GBP": 0.87088
            },
            "2018-04-10": {
                "GBP": 0.87183
            },
            "2018-04-11": {
                "GBP": 0.8736
            },
            "2018-04-12": {
                "GBP": 0.86745
            },
            "2018-04-13": {
                "GBP": 0.864
            },
            "2018-04-16": {
                "GBP": 0.86465
            },
            "2018-04-17": {
                "GBP": 0.8628
            },
            "2018-04-18": {
                "GBP": 0.87105
            },
            "2018-04-19": {
                "GBP": 0.86975
            },
            "2018-04-20": {
                "GBP": 0.87608
            },
            "2018-04-23": {
                "GBP": 0.8764
            },
            "2018-04-24": {
                "GBP": 0.87468
            },
            "2018-04-25": {
                "GBP": 0.8738
            },
            "2018-04-26": {
                "GBP": 0.871
            }
        },
        "start_at": "2017-04-26"
    }
    


```python
# This data can then be used to plot the change in the exchange rate through time or any other further analysis
```

### Testing the API response to incorrect input


```python
# Testing how the API behaves if given incorrect input parameters
```


```python
# Trying out an invalid DATE
invalid_url = base_url + "/2019-13-01"
```


```python
# Making the request
response = requests.get(invalid_url)
response.status_code # The server responds with a 400 error code indicating a 'bad request'
```




    400




```python
# There is also an error message in the JSON
response.json()
```




    {'error': "time data '2019-13-01' does not match format '%Y-%m-%d'"}




```python
# Testing an invalid BASE CURRENCY
invalid_url = base_url + "/2019-12-01?base=USB"
```


```python
response = requests.get(invalid_url)
response.status_code
```




    400




```python
response.json()
```




    {'error': "Base 'USB' is not supported."}




```python
# Testing an invalid EXCHANGE CURRENCY
invalid_url = base_url + "/2019-12-01?symbols=WBP"
```


```python
response = requests.get(invalid_url)
response.status_code
```




    400




```python
response.json()
```




    {'error': "Symbols 'WBP' are invalid for date 2019-12-01."}



### Creating a simple currency convertor


```python
# We can use the data provided from this API to create a simple currency convertor
```


```python
# Gathering input parameters from the user
date = input("Please enter the date (in the format 'yyyy-mm-dd' or 'latest'): ")
base = input("Convert from (currency): ")
curr = input("Convert to (currency): ")
quan = float(input("How much {} do you want to convert: ".format(base)))

# Constructing the URL based on the user parameters and sending a request to the server
url = base_url + "/" + date + "?base=" + base + "&symbols=" + curr
response = requests.get(url)

# Displaying the error message, if something went wrong
if(response.ok is False):
    print("\nError {}:".format(response.status_code))
    print(response.json()['error'])

else:
    data = response.json()
    rate = data['rates'][curr]
    
    result = quan*rate
    
    print("\n{0} {1} is equal to {2} {3}, based upon exchange rates on {4}".format(quan,base,result,curr,data['date']))

```

    Please enter the date (in the format 'yyyy-mm-dd' or 'latest'): 2009-07-03
    Convert from (currency): GBP
    Convert to (currency): USD
    How much GBP do you want to convert: 26.0
    
    26.0 GBP is equal to 42.538277371199996 USD, based upon exchange rates on 2009-07-03
    
